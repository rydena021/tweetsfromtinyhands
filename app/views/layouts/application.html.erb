<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--Import Google Icon Font-->
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css"  media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Trump Tweets</title>
    <%= csrf_meta_tags %>
    <%= action_cable_meta_tag %>
    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag "https://d3js.org/d3.v3.min.js" %>
    <%= javascript_include_tag 'application' %>
  </head>
  <body>
    <%= render 'shared/dummy_navbar' %>

    <%= yield %>


<!-- DONUT -->
<script>
  var getData = function(){
  var x = Math.round(Math.random() * 100),
      y = 100 - x,
      data = { "Android": x, "iOS": y},
      text = "Android = " + x + "<br>iOS =" + y;

  d3.select("#data").html(text);
    return data;
  };

  var chart = donut()
                .canvas(d3.select("#device"))
                .data(getData())
                .render();


  d3.select("#refresh").on("click", function(){
    chart.data(getData()).render();
});

</script>
<!-- SENTIMENT -->
<script>
  d3.json('<%= asset_path "sentiment.json" %>', function(data) {
    var freqData= data;
    dashboard('div#sentiment',freqData);
  });

  function updateSentimentData(path) {
    d3.json(path, function(data) {
      var freqData= data;
      dashboard('div#sentiment',freqData);
    });
  };
</script>
<!-- WORD CLOUD -->
<script>
  draw_cloud("<%= asset_path 'word_frequency/2015-06-01.json' %>");
</script>

        <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>

  </body>
  <footer class="page-footer">
      <%= render 'shared/footer' %>
  </footer>
</html>



